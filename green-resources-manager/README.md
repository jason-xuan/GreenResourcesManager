## TODO

1. 所有的资源，在保存封面图的时候，应该单独保存到cover文件夹里面
2. 游戏的截图文件夹逻辑需要改进，当重命名之后，不应该新建一个新的文件夹
3. 左侧的tag列表应该可以单独滚动
4. 多加几个主题
5. 不应该对同名的游戏文件报告重复，而是同名而且同文件夹，但是不同路径

## BUG记录

- 在没有游戏的时候，排版会错位

![1766245824032](image/README/1766245824032.png)

- 运行《巫女姫淫魔传》的时候，游戏结束了也会继续进行游戏。

  - 游戏启动
    ↓
    启动器进程被 spawn（PID: 32008）
    ↓
    系统记录 PID: 32008 到 gameProcesses
    ↓
    尝试获取窗口标题 → 失败（窗口未创建或无法识别）
    ↓
    启动器进程 1 秒后退出
    ↓
    触发 exit 事件 → 发送 game-process-ended
    ↓
    系统从 gameProcesses 中移除 PID: 32008
    ↓
    但实际游戏进程（可能是子进程，PID 不同）仍在运行
    ↓
    定期检查时，使用旧的 PID（3308, 54636）检查
    ↓
    getAllWindowTitlesByPID 返回 success: true, windowTitles: []
    ↓
    代码误判：进程存在但没有窗口 → 认为仍在运行
    ↓
    结果：游戏显示"运行中"，继续累加时间
  - 
  - 暂无解决方案
- 如果在记录游戏的瞬间，关闭电源/电脑死机，可能导致记录部分的存档丢失，比如game.json

  - 尝试用副本来增加备份
  - 尝试全部使用原子操作，还是不行
  - 暂无有效解决方案

## 更新日志

### 0.6.4

- 重构小说页面的代码
- 重构音频页面的代码
- 增加原生flash支持
- 设置页重构

### 0.6.3

- tag筛选栏有独立的滚动条
- 重构游戏页面的代码
- 重构漫画页面的代码
- 重构视频页面的代码
- 添加游戏时，不会默认写入未知开发商，而是默认空字符串
- 游戏页的tag显示从3增加到9

### 0.6.2

功能新增

- 新增强制结束游戏，现在在运行时点击开始游戏的按钮可以强制结束游戏
- electron.js超大规模重构，狠狠整理石山

### 0.6.1

**功能新增**

* **存档备份功能，可以设置定时存档备份，并且每次写入存档时会创建backup文件，保护文件**
* **减少游戏时的保存频率，现在每隔1分钟会保存一下时长**
* **增加保存的稳定性，在多个保存任务并发时，使用队列一一保存，而不是同时保存**

### 0.6.0

**Bug修复**

* **修复切换页面后，游戏不显示运行时长的bug**
* **修复修正图片浏览次数的bug，之前是只要查看就算浏览一次，改为只有点进播放器才算查看**
* **修复看漫画时会卡第一页的问题**

**功能新增**

* **自动更新功能**
* **增加成就和个人页**
* **增加伪装模式，并且让文本和图片可以替换**

**体验优化**

* **toast的信息更加人性化**
* **视频时长会自动更新，不用手动点更新了**
* **所有页面代码大规模重构**

### 0.4.0

**功能新增**

* **游戏读取和运行**
* **游戏时长统计**
* **运行游戏时提示正在运行，以及记录第一次运行的时间**
* **新增游戏、图片、视频、小说、网站和声音的页面和基本功能**
* **视频播放器在新窗口打开额外视频**
* **视频可以读取缩略图，并将视频的缩略图保存到本地**
* **视频和音频时长的获取**
* **开机自启，最小到托盘**
* **全局音频播放器**
